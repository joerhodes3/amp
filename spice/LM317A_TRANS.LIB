.SUBCKT LM317H 3 1 2
*Positive Adjustable Regulator
*External Node Designations
*node 1: VREF (OUTPUT)
*node 2: Ground (Common)
*node 3: Line Voltage
ECCX 131 2 135 2 1.0
VXX 133 2 DC 0
FSET6 2 135 VSENS2 1
FPP 3 2 VXX 1.0
R_YY 31 2 1e6
R_XX 15 2 1e8
R_ZZ 36 2 1e6
R_QQ 65 2 1e8
RXX 1 2 1e8
VSENS1 10 1 DC 0
ISET 2 15 DC 1e-3
DON1 15 16 DMOD1
VSENS2 16 19 DC 0
DON2 15 17 DMOD1
EON2 18 2 3 2 1
FYY 3 2 VSENS1 1
DON3 15 27 DMOD1
VDROP3 28 27 DC 2
EON3 28 2 3 2 4
ELINE 13 42 66 2 1
FSET2 2 36 VSENS2 1
DSC1 36 35 DMOD1
RCL1 36 37 10
DSC2 37 38 DMOD1
ESCCON 38 39 30 2 1
VSCCON 39 40 DC 0
FSC 19 2 VSCCON 1
FSET3 2 31 VSENS2 1
DOV1 31 32 DMOD1
EOV1 32 2 3 1 1
DOV2 31 33 DMOD1
ISET4 2 30 DC 1e-3
ELOAD 41 2 77 2 -1
ERIPPLE 42 41 72 2 1
EREF 12 13 19 2 1
E3 52 2 3 2 1
CBYPS 54 2 0.001
VORB 54 60 DC 0
RB 60 2 1e3
RBR 72 2 1000
CBS2 52 71 1
RSTEP 77 2 1
FRB 2 65 VORB 1
DRB2 65 67 DMOD1
VXRB 67 68 DC -1
EXRB 68 2 1 2 1
DRB1 65 66 DMOD1
RB1 66 2 1000
.MODEL DMOD1 D
EXX 132 131 3 131 0.009
RST6 135 2 15000
RIQX 133 132 RQIX 300000
.MODEL RQIX R TC1=-0.001
RSET 19 2 RSET 1250
.MODEL RSET R TC1=1e-05 TC2=-8.01e-07
RS1 10 12 0.0006
VDROPX 18 17 1.26
HSENSE1 35 2 VSENS1 10
RISC 30 2 RISC 10000
.MODEL RISC R TC1=-0.0006
ROV 34 2 35000
VOV 33 34 15
EOV2 2 40 34 2 0.142857
FIQD 3 2 VSENS1 1e-07
RY 52 54 8e+06
RA 72 73 2163.02
RYR 71 72 6.30857e+06
CRA 52 73 8.40657e-11
HSTEP 76 2 VSENS1 0.2
CSTEP 76 77 1e-05
.ENDS lm317h
